import { useEffect } from 'react';
import { motion } from 'framer-motion';
import { useGameStore } from '../store/gameStore';
import { Card } from '../types/game';
import { Sparkles } from 'lucide-react';

const RARITY_COLORS: Record<string, string> = {
  SSR: 'from-yellow-500 via-orange-500 to-red-500',
  SR: 'from-purple-500 via-pink-500 to-purple-600',
  R: 'from-blue-500 via-cyan-500 to-blue-600',
};

export function CardDrawPhase() {
  const userCards = useGameStore((state) => state.userCards);
  const startRace = useGameStore((state) => state.startRace);
  const drawUserCards = useGameStore((state) => state.drawUserCards);

  // 如果没有卡片，自动抽取（只在组件首次挂载时）
  useEffect(() => {
    if (userCards.length === 0) {
      console.log('No cards found, drawing cards in CardDrawPhase');
      drawUserCards();
    }
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, []); // 只在挂载时运行一次，作为备用

  const handleDraw = () => {
    console.log('Drawing more cards');
    drawUserCards();
  };

  const handleStartRace = () => {
    if (userCards.length === 3) {
      console.log('Starting
